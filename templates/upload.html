{% extends "base.html" %}

{% block title %}Upload Resume - Rez.ai{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Tailor Your Resume</h1>
    <p>Upload your resume and provide a job description to get a tailored version.</p>
    
    <form action="{{ url_for('main.generate') }}" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="resume_file">Upload Resume (PDF, DOCX, or TXT)</label>
            <input type="file" name="resume_file" id="resume_file" accept=".pdf,.docx,.txt" required>
        </div>
        
        <div class="form-group">
            <label>Job Description</label>
            <div class="input-toggle">
                <label>
                    <input type="radio" name="input_type" value="text" checked> Enter Text
                </label>
                <label>
                    <input type="radio" name="input_type" value="url"> Enter URL
                </label>
            </div>
            
            <div id="text-input-container">
                <textarea name="job_description" id="job_description" placeholder="Paste the job description here..."></textarea>
            </div>
            
            <div id="url-input-container" style="display:none;">
                <input type="url" name="job_url" id="job_url" placeholder="https://www.linkedin.com/jobs/view/123456789">
                <div class="url-hint">Supports LinkedIn, Indeed, Glassdoor, and most job posting sites</div>
            </div>
        </div>
        
        <button type="submit" class="btn">Generate Tailored Resume</button>
    </form>
</div>

{% endblock %}

{% block scripts %}
<script>
    // Toggle between text and URL input
    document.querySelectorAll('input[name="input_type"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const textContainer = document.getElementById('text-input-container');
            const urlContainer = document.getElementById('url-input-container');
            const textArea = document.getElementById('job_description');
            const urlInput = document.getElementById('job_url');
            
            if (this.value === 'text') {
                textContainer.style.display = 'block';
                urlContainer.style.display = 'none';
                textArea.required = true;
                urlInput.required = false;
            } else {
                textContainer.style.display = 'none';
                urlContainer.style.display = 'block';
                textArea.required = false;
                urlInput.required = true;
            }
        });
    });
</script>
{% endblock %}