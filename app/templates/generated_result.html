<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated {{ result.type|title }} - Resume Tailor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .result-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .content-preview {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            white-space: pre-wrap;
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            max-height: 600px;
            overflow-y: auto;
        }
        .summary-highlight {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .summary-highlight h5 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        .download-section {
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .btn-download {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
            color: white;
        }
        .analysis-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .success-message {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .feature-highlight {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid result-container">
        <div class="row">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1 class="text-primary">
                        <i class="fas fa-file-alt me-2"></i>
                        Generated {{ result.type|title }}
                    </h1>
                    <a href="{{ url_for('main.generate') }}" class="btn btn-outline-primary">
                        <i class="fas fa-plus me-2"></i>Generate Another
                    </a>
                </div>

                <!-- Success Message -->
                <div class="success-message">
                    <i class="fas fa-check-circle me-2"></i>
                    <strong>Success!</strong> {{ result.message }}
                </div>

                <!-- Tailored Summary Highlight (for resumes) -->
                {% if result.type == 'resume' and result.tailored_summary %}
                <div class="summary-highlight">
                    <h5><i class="fas fa-bullseye me-2"></i>AI-Generated Tailored Summary</h5>
                    <p class="mb-0">{{ result.tailored_summary }}</p>
                    <small class="text-muted mt-2 d-block">
                        <i class="fas fa-info-circle me-1"></i>
                        This summary is specifically optimized for maximum ATS match score with the job description.
                    </small>
                </div>
                {% endif %}

                <!-- Feature Highlight -->
                <div class="feature-highlight">
                    <h6><i class="fas fa-star me-2"></i>Enhanced with AI-Powered Summary Optimization</h6>
                    <p class="mb-0">Your {{ result.type }} includes a professionally crafted summary section that's specifically tailored to match the job requirements and maximize your ATS compatibility score.</p>
                </div>

                <!-- Download Section -->
                <div class="download-section">
                    <h4 class="mb-3">
                        <i class="fas fa-download me-2"></i>Download Your Documents
                    </h4>
                    
                    <div class="row">
                        {% if result.pdf_result and result.pdf_result.success %}
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-file-pdf fa-3x text-danger mb-3"></i>
                                    <h5>{{ result.type|title }} PDF</h5>
                                    <p class="text-muted">Professional formatted PDF ready for submission</p>
                                    <a href="{{ url_for('main.download_pdf', filename=result.pdf_result.filename) }}" 
                                       class="btn-download">
                                        <i class="fas fa-download me-2"></i>Download PDF
                                    </a>
                                    <small class="d-block mt-2 text-muted">
                                        Size: {{ "%.1f"|format(result.pdf_result.file_size / 1024) }} KB
                                    </small>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Cover Letter (if generated alongside resume) -->
                        {% if result.cover_letter_result and result.cover_letter_result.success and result.cover_letter_result.pdf_result %}
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-file-alt fa-3x text-info mb-3"></i>
                                    <h5>Cover Letter PDF</h5>
                                    <p class="text-muted">Matching cover letter automatically generated</p>
                                    <a href="{{ url_for('main.download_pdf', filename=result.cover_letter_result.pdf_result.filename) }}" 
                                       class="btn-download">
                                        <i class="fas fa-download me-2"></i>Download Cover Letter
                                    </a>
                                    <small class="d-block mt-2 text-muted">
                                        Size: {{ "%.1f"|format(result.cover_letter_result.pdf_result.file_size / 1024) }} KB
                                    </small>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    {% if not result.pdf_result or not result.pdf_result.success %}
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        PDF generation encountered an issue. You can still copy the text content below.
                    </div>
                    {% endif %}
                </div>

                <!-- Content Preview -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h4 class="mb-0">
                            <i class="fas fa-eye me-2"></i>{{ result.type|title }} Preview
                        </h4>
                        <button class="btn btn-outline-secondary btn-sm" onclick="copyToClipboard()">
                            <i class="fas fa-copy me-2"></i>Copy Text
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="content-preview" id="contentPreview">
                            {% if result.type == 'resume' %}
                                {{ result.generated_resume }}
                            {% else %}
                                {{ result.generated_cover_letter }}
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Analysis Section (if available) -->
                {% if result.cover_letter_result and result.cover_letter_result.success %}
                <div class="analysis-section">
                    <h4><i class="fas fa-chart-line me-2"></i>Document Package Summary</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Resume Generated</h6>
                            <ul>
                                <li>AI-optimized professional summary</li>
                                <li>Keyword-matched content</li>
                                <li>ATS-friendly formatting</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Cover Letter Generated</h6>
                            <ul>
                                <li>Personalized introduction</li>
                                <li>Job-specific highlights</li>
                                <li>Professional closing</li>
                            </ul>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Action Buttons -->
                <div class="text-center mt-4">
                    <a href="{{ url_for('main.generate') }}" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-plus me-2"></i>Generate Another Document
                    </a>
                    <a href="{{ url_for('main.index') }}" class="btn btn-outline-secondary btn-lg">
                        <i class="fas fa-home me-2"></i>Back to Home
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function copyToClipboard() {
            const content = document.getElementById('contentPreview').textContent;
            navigator.clipboard.writeText(content).then(function() {
                // Show success feedback
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check me-2"></i>Copied!';
                btn.classList.remove('btn-outline-secondary');
                btn.classList.add('btn-success');
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('btn-success');
                    btn.classList.add('btn-outline-secondary');
                }, 2000);
            });
        }
    </script>
</body>
</html>
